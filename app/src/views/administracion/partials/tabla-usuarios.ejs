<div class="table-container">
    <div class="table-header">
        <h2><i class="fas fa-users"></i> Lista de usuarios</h2>
        <div class="header-actions">
            <button onclick="agregarUsuario()" class="btn-main">
                <i class="fas fa-plus"></i> Agregar nuevo usuario
            </button>
        </div>
    </div>

    <table class="admin-table">
        <thead>
            <tr>
                <th>Usuario</th>
                <th>Nombre</th>
                <th>Correo</th>
                <th>Tipo</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <% if (usuarios && usuarios.length> 0) { %>
                <% usuarios.forEach(function(user) { %>
                    <tr>
                        <td>
                            <%= user.usuario %>
                        </td>
                        <td>
                            <%= user.nombre || '' %>
                        </td>
                        <td>
                            <%= user.correo || user.mail %>
                        </td>
                        <td>
                            <span class="badge"
                                style="background: <%= (user.tipo == 1 || user.tipo === 'admin') ? '#d1c4e9' : '#e0e0e0' %>; color: <%= (user.tipo == 1 || user.tipo === 'admin') ? '#512da8' : '#333' %>; padding: 4px 8px; border-radius: 12px; font-size: 0.85rem;">
                                <%= (user.tipo==1 || user.tipo==='admin' ) ? 'Administrador' : 'Usuario' %>
                            </span>
                        </td>
                        <td class="actions-cell">
                            <button class="btn-edit" onclick="editarUsuario('<%= user.usuario %>')" title="Modificar">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-delete" onclick="eliminarUsuario('<%= user.usuario %>')"
                                <%=user.usuario===usuario.usuario
                                ? 'disabled title="No puedes eliminar tu propio usuario" style="opacity:0.5;cursor:not-allowed;"'
                                : 'title="Eliminar"' %>>
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <% }); %>
                        <% } else { %>
                            <tr>
                                <td colspan="5" style="text-align:center;padding:20px;color: #666;">No hay usuarios
                                    registrados</td>
                            </tr>
                            <% } %>
        </tbody>
    </table>
</div>